jQuery(document).ready(function(c){if("undefined"===typeof hteFacebookAccountKit){return false}var a=c("body"),e=false;(function(){a.on("click",".facebook-account-kit button.sms-or-email",function(l){l.preventDefault();var k=this,j=c(k),i=j.parent(),h=i.next(".fac-popup");h.toggleClass("active")});a.on("click",".fac-popup button.close-btn",function(k){k.preventDefault();var j=this,i=c(j),h=i.closest(".fac-popup");h.toggleClass("active")})})();function g(k,h,i){h=h||"login";i=i||"";if(k.status==="PARTIALLY_AUTHENTICATED"){var j=a.find(".hocwp-theme.ajax-overlay");if(!j||!j.length){a.append(hocwpTheme.ajaxOverlay);j=a.find(".hocwp-theme.ajax-overlay")}a.trigger("hocwpTheme:ajaxStart");c.post(hocwpTheme.ajaxUrl,{action:"hocwp_theme_ajax",callback:"hocwp_extension_account_connect_facebook_account_kit_ajax_callback",code:k.code,csrf:k.state,app_id:hteFacebookAccountKit.app_id,nonce:hocwpTheme.nonce,app_secret:hteFacebookAccountKit.app_secret,api_version:hteFacebookAccountKit.api_version,do_action:h,user_id:i},function(l){a.trigger("hocwpTheme:ajaxComplete");if(l.data&&l.data.message&&c.trim(l.data.message)){alert(l.data.message)}if(l.success){if(l.data&&l.data.redirect_to&&c.trim(l.data.redirect_to)){window.location.href=l.data.redirect_to}else{window.location.reload()}}})}else{if(k.status==="NOT_AUTHENTICATED"){console.log(hteFacebookAccountKit.status_NOT_AUTHENTICATED)}else{if(k.status==="BAD_PARAMS"){console.log(hteFacebookAccountKit.status_BAD_PARAMS)}}}}function f(h){g(h)}function d(h){g(h,"connect-email",c("input[name='user_id']").val())}function b(h){g(h,"connect-phone",c("input[name='user_id']").val())}(function(){AccountKit_OnInteractive=function(){AccountKit.init({appId:hteFacebookAccountKit.app_id,state:hteFacebookAccountKit.nonce,version:hteFacebookAccountKit.api_version,display:hteFacebookAccountKit.display,fbAppEventsEnabled:true,debug:hteFacebookAccountKit.debug})};var i=0,h=setInterval(function(){if("undefined"!==typeof AccountKit_OnInteractive.hasRun&&true===AccountKit_OnInteractive.hasRun){e=true;clearInterval(h)}i++},500);function k(l){l=l||"";AccountKit.login("PHONE",{countryCode:"+"+hteFacebookAccountKit.country_code,phoneNumber:l},f)}function j(l){l=l||"";AccountKit.login("EMAIL",{emailAddress:l},f)}a.on("click",".fac-popup.verify-box .buttons button",function(o){o.preventDefault();if(!e){return false}var n=this,l=c(n),p=l.attr("id"),m=false;if("verify-phone"===p){m=true;k()}else{if("verify-email"===p){j();m=true}}if(m&&"modal"==hteFacebookAccountKit.display){a.find(".fac-popup.verify-box").toggleClass("active")}});if(a.hasClass("profile-php")&&a.hasClass("wp-admin")){c(hteFacebookAccountKit.connect_email_button).insertAfter(a.find("td input[name='email']"));c(hteFacebookAccountKit.connect_phone_button).insertAfter(a.find("td input[name='phone']"));setTimeout(function(){if("undefined"===typeof AccountKit_OnInteractive.hasRun||true!==AccountKit_OnInteractive.hasRun){AccountKit_OnInteractive();e=true}},1000);a.on("click","td input[name='email'] + button.connect-disconnect",function(q){q.preventDefault();var o=this,n=c(o),p=n.data("action"),l=n.prev("input[name='email']"),m=l.val();if("disconnect-email"==p){if(confirm(hteFacebookAccountKit.confirm_disconnect_email)){c.post(hocwpTheme.ajaxUrl,{action:"hocwp_theme_ajax",callback:"hocwp_extension_account_connect_facebook_account_kit_ajax_callback",do_action:p,email:m,nonce:hocwpTheme.nonce},function(r){a.trigger("hocwpTheme:ajaxDone",[n]);if(r.data&&r.data.message&&c.trim(r.data.message)){alert(r.data.message)}if(r.success){window.location.reload()}})}else{a.trigger("hocwpTheme:ajaxDone",[n])}}else{if("connect-email"==p){a.trigger("hocwpTheme:ajaxDone",[n]);if(!e){return false}AccountKit.login("EMAIL",{emailAddress:m},d)}}});a.on("click","td input[name='phone'] + button.connect-disconnect",function(q){q.preventDefault();var o=this,n=c(o),p=n.data("action"),m=n.prev("input[name='phone']"),l=m.val();if("disconnect-phone"==p){if(confirm(hteFacebookAccountKit.confirm_disconnect_phone)){c.post(hocwpTheme.ajaxUrl,{action:"hocwp_theme_ajax",callback:"hocwp_extension_account_connect_facebook_account_kit_ajax_callback",do_action:p,phone:l,nonce:hocwpTheme.nonce,user_id:c("input[name='user_id']").val()},function(r){a.trigger("hocwpTheme:ajaxDone",[n]);if(r.data&&r.data.message&&c.trim(r.data.message)){alert(r.data.message)}if(r.success){window.location.reload()}})}else{a.trigger("hocwpTheme:ajaxDone",[n])}}else{if("connect-phone"==p){a.trigger("hocwpTheme:ajaxDone",[n]);if(!c.trim(l)){m.focus()}else{if(!e){return false}AccountKit.login("PHONE",{countryCode:"+"+hteFacebookAccountKit.country_code,phoneNumber:l},b)}}}})}})()});