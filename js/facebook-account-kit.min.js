jQuery(document).ready(function(c){if("undefined"===typeof hteFacebookAccountKit){return false}var a=c("body"),e=false;(function(){a.on("click",".facebook-account-kit button.sms-or-email",function(l){l.preventDefault();var k=this,j=c(k),i=j.parent(),h=i.next(".fac-popup");h.toggleClass("active")});a.on("click",".fac-popup button.close-btn",function(k){k.preventDefault();var j=this,i=c(j),h=i.closest(".fac-popup");h.toggleClass("active")})})();function g(k,h,i){h=h||"login";i=i||"";if(k.status==="PARTIALLY_AUTHENTICATED"){var j=a.find(".hocwp-theme.ajax-overlay");if(!j||!j.length){a.append(hocwpTheme.ajaxOverlay);j=a.find(".hocwp-theme.ajax-overlay")}a.trigger("hocwpTheme:ajaxStart");c.post(hocwpTheme.ajaxUrl,{action:"hocwp_theme_ajax",callback:"hocwp_extension_account_connect_facebook_account_kit_ajax_callback",code:k.code,csrf:k.state,app_id:hteFacebookAccountKit.app_id,nonce:hocwpTheme.nonce,app_secret:hteFacebookAccountKit.app_secret,api_version:hteFacebookAccountKit.api_version,do_action:h,user_id:i},function(l){a.trigger("hocwpTheme:ajaxComplete");if(l.data&&l.data.message&&c.trim(l.data.message)){alert(l.data.message)}if(l.success){if(l.data&&l.data.redirect_to&&c.trim(l.data.redirect_to)){window.location.href=l.data.redirect_to}else{window.location.reload()}}})}else{if(k.status==="NOT_AUTHENTICATED"){console.log(hteFacebookAccountKit.status_NOT_AUTHENTICATED)}else{if(k.status==="BAD_PARAMS"){console.log(hteFacebookAccountKit.status_BAD_PARAMS)}}}}function f(h){g(h)}function d(h){g(h,"connect-email",c("input[name='user_id']").val())}function b(h){g(h,"connect-phone",c("input[name='user_id']").val())}(function(){AccountKit_OnInteractive=function(){AccountKit.init({appId:hteFacebookAccountKit.app_id,state:hteFacebookAccountKit.nonce,version:hteFacebookAccountKit.api_version,display:hteFacebookAccountKit.display,fbAppEventsEnabled:true,debug:hteFacebookAccountKit.debug})};var j=0,h=hteFacebookAccountKit.country_code,i=setInterval(function(){if("undefined"!==typeof AccountKit_OnInteractive.hasRun&&true===AccountKit_OnInteractive.hasRun){e=true;clearInterval(i)}j++},500);if(c.trim(h)){h="+"+h}function l(m){m=m||"";AccountKit.login("PHONE",{countryCode:h,phoneNumber:m},f)}function k(m){m=m||"";AccountKit.login("EMAIL",{emailAddress:m},f)}a.on("click",".fac-popup.verify-box .buttons button",function(p){p.preventDefault();if(!e){return false}var o=this,m=c(o),q=m.attr("id"),n=false;if("verify-phone"===q){n=true;l()}else{if("verify-email"===q){k();n=true}}if(n&&"modal"==hteFacebookAccountKit.display){a.find(".fac-popup.verify-box").toggleClass("active")}});if(a.hasClass("profile-php")&&a.hasClass("wp-admin")){c(hteFacebookAccountKit.connect_email_button).insertAfter(a.find("td input[name='email']"));c(hteFacebookAccountKit.connect_phone_button).insertAfter(a.find("td input[name='phone']"));setTimeout(function(){if("undefined"===typeof AccountKit_OnInteractive.hasRun||true!==AccountKit_OnInteractive.hasRun){AccountKit_OnInteractive();e=true}},1000);a.on("click","td input[name='email'] + button.connect-disconnect",function(r){r.preventDefault();var p=this,o=c(p),q=o.data("action"),m=o.prev("input[name='email']"),n=m.val();if("disconnect-email"==q){if(confirm(hteFacebookAccountKit.confirm_disconnect_email)){c.post(hocwpTheme.ajaxUrl,{action:"hocwp_theme_ajax",callback:"hocwp_extension_account_connect_facebook_account_kit_ajax_callback",do_action:q,email:n,nonce:hocwpTheme.nonce},function(s){a.trigger("hocwpTheme:ajaxDone",[o]);if(s.data&&s.data.message&&c.trim(s.data.message)){alert(s.data.message)}if(s.success){window.location.reload()}})}else{a.trigger("hocwpTheme:ajaxDone",[o])}}else{if("connect-email"==q){a.trigger("hocwpTheme:ajaxDone",[o]);if(!e){return false}AccountKit.login("EMAIL",{emailAddress:n},d)}}});a.on("click","td input[name='phone'] + button.connect-disconnect",function(r){r.preventDefault();var p=this,o=c(p),q=o.data("action"),n=o.prev("input[name='phone']"),m=n.val();if("disconnect-phone"==q){if(confirm(hteFacebookAccountKit.confirm_disconnect_phone)){c.post(hocwpTheme.ajaxUrl,{action:"hocwp_theme_ajax",callback:"hocwp_extension_account_connect_facebook_account_kit_ajax_callback",do_action:q,phone:m,nonce:hocwpTheme.nonce,user_id:c("input[name='user_id']").val()},function(s){a.trigger("hocwpTheme:ajaxDone",[o]);if(s.data&&s.data.message&&c.trim(s.data.message)){alert(s.data.message)}if(s.success){window.location.reload()}})}else{a.trigger("hocwpTheme:ajaxDone",[o])}}else{if("connect-phone"==q){a.trigger("hocwpTheme:ajaxDone",[o]);if(!c.trim(m)){n.focus()}else{if(!e){return false}AccountKit.login("PHONE",{countryCode:h,phoneNumber:m},b)}}}})}})()});