window.hocwpTheme=window.hocwpTheme||{};window.hteVIP=window.hteVIP||{};jQuery(document).ready(function(e){var a=e("body"),b=e("#wizardAddPost"),f=b.find(".progress .progress-bar"),c=b.find("button[type='submit']"),g=true,d=e(".add-post-frontend .add-post-form");if(d.hasClass("added")){g=false}d.on("submit",function(){g=false});(function(h){if(!h){return false}window.addEventListener("beforeunload",function(i){var j=hocwpTheme.l10n.beforeUnloadConfirmMessage;(i||window.event).returnValue=j;return j})})(g);(function(){a.on("HTEAddPostFrontend:FileChange",function(l,i){var k=e(i),h=k.closest(".image-button"),m=h.next(".wrap-image"),j=e("#temp_"+k.attr("id"));if(j.length){setTimeout(function(){j.html(m.html())},3000)}});a.on("HTEAddPostFrontend:PostTypeChange",function(i,h){if("object"==typeof h&&h.success){b.find(".preview-taxs").html(h.data.preview_taxs)}})})();(function(){var h=window.location.hash;if(e.trim(h)){b.find(".nav-pills > li > a[href='"+h+"']").trigger("click")}b.on("click",".nav-pills > li > a",function(i){i.preventDefault();if("undefined"!==typeof i.originalEvent){return false}});e(".pager.wizard").on("click","li a",function(q){q.preventDefault();var o=e(this),n=b.find(".nav-pills li.active"),m=o.parent(),k=null,r=false;if(m.hasClass("disabled")){return false}g=true;if(m.hasClass("next")){var l=b.find(".tab-pane.active"),p=l.find("input[required], input[required='required'], select[required], select[required='required'], textarea[required], textarea[required='required']");if(p.length){p.each(function(){var v=e(this),u=v.val(),t=v.prop("tagName");if(!e.trim(u)||("SELECT"==t&&0==u)){v.focus();r=true;return false}})}if(r){c.addClass("disabled");return false}var i=n.next();k=i;m.prev().removeClass("disabled").children("a").removeClass("disabled");if(i.length){b.find(".nav-pills li").removeClass("active");i.find("a").trigger("click")}if(i.is(":last-child")){m.addClass("disabled");c.removeClass("disabled");g=false}}else{var s=n.prev();k=s;m.next().removeClass("disabled").children("a").removeClass("disabled");if(s.length){b.find(".nav-pills li").removeClass("active");s.find("a").trigger("click")}if(s.is(":first-child")){m.addClass("disabled")}}var j=parseInt(k.index());j++;j*=25;f.css({width:j.toString()+"%"});o.blur()})})();(function(){e("#typeOfPost").on("change",function(){var n=this,j=e(n),o=j.val(),m=e("#"+o+"Desc"),h=j.closest(".tab-pane"),p=h.find(".price-fee > span"),k=h.find("option[value='"+o+"']");h.find(".vip-desc").hide();b.attr("data-type",o);if("vip"==o){var i=parseInt(b.attr("data-can-post"));if(0==i){j.val(j.find("option[value='normal']").attr("value"));alert(hteVIP.l10n.not_enough_coin_message);return false}p.removeClass("label-primary");p.addClass("label-success")}else{p.addClass("label-primary");p.removeClass("label-success")}if(m.length){m.show()}p.text(k.attr("data-price"));var l=e("#temp_Fee");if(l.length){l.html(p.prop("outerHTML"))}e("#EndDate").trigger("change")})})();(function(){a.on("hocwpThemeComboboxInputChange",function(n,m,k){var j=k.parent().prev("select");if(j.length){var l=b.find("#temp_"+j.attr("id"));if(l.length&&e.trim(m)){l.html(m)}}});b.on("change cut paste keyup","input, select, textarea",function(){var m=this,k=e(m),j=k.prop("tagName"),o=k.val(),n=b.find("#temp_"+k.attr("id"));if("SELECT"==j){var l=k.find("option[value='"+k.val()+"']");o=l.text();o=e.trim(o)}else{if("INPUT"==j){o=e.trim(o)}}if(n.length&&e.trim(o)){n.html(o)}});e("#StartDate, #EndDate").on("change",function(){var t=this,n=e(t),x=n.attr("id"),r=n.val(),q=n.val(),u=null;if("StartDate"==x){u=e("#EndDate");q=u.val()}else{u=e("#StartDate");r=u.val()}var m=r.split("/"),l=q.split("/");r=m[2]+"-"+m[1]+"-"+m[0];q=l[2]+"-"+l[1]+"-"+l[0];var z=new Date(r),y=new Date(q),w=Math.abs(y.getTime()-z.getTime()),o=Math.ceil(w/(1000*3600*24)),j=e("#typeOfPost"),s=j.val(),k=e("#temp_Cost");if(k.length){var p=k.closest(".form-group"),v=p.find("div.price-fee");if("vip"==s){var A=parseFloat(j.find("option[value='"+s+"']").attr("data-cost"));A*=o;e("#TotalCost").val(A);A=A.toFixed(2);k.html('<span class="label label-success">$'+A+"</span>");v.show();v.prev("label").show()}else{k.html("");v.hide();v.prev("label").hide()}}});var i=null,h=setInterval(function(){if("undefined"!==typeof tinyMCE){i=tinyMCE.editors.post_content;if("undefined"!=typeof i){i.on("NodeChange keyup",function(){var j=e("#temp_post_content");if(j.length){j.html(i.getContent())}});clearInterval(h)}}},1000)})()});