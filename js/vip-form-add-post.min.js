window.hocwpTheme=window.hocwpTheme||{};window.hteVIP=window.hteVIP||{};jQuery(document).ready(function(e){var a=e("body"),b=e("#wizardAddPost"),f=b.find(".progress .progress-bar"),c=b.find("button[type='submit']"),h=true,d=e(".add-post-frontend .add-post-form");if(d.hasClass("added")){h=false}d.on("submit",function(i){if(!confirm(hteVIP.l10n.confirm_submit_post_message)){i.preventDefault();h=true}else{h=false}if(!h){if(window.removeEventListener){window.removeEventListener("beforeunload",g)}else{if(window.detachEvent){window.detachEvent("beforeunload",g)}}}});d.on("click","button[type='submit'], input[type='submit']",function(){h=false});function g(i){var j=hocwpTheme.l10n.beforeUnloadConfirmMessage;(i||window.event).returnValue=j;return j}(function(i){if(!i){return false}window.addEventListener("beforeunload",g)})(h);(function(){a.on("HTEAddPostFrontend:FileChange",function(m,j){var l=e(j),i=l.closest(".image-button"),n=i.next(".wrap-image"),k=e("#temp_"+l.attr("id"));if(k.length){setTimeout(function(){k.html(n.html())},3000)}});a.on("HTEAddPostFrontend:PostTypeChange",function(j,i){if("object"==typeof i&&i.success){b.find(".preview-taxs").html(i.data.preview_taxs)}})})();(function(){var i=window.location.hash;if(e.trim(i)){b.find(".nav-pills > li > a[href='"+i+"']").trigger("click")}b.on("click",".nav-pills > li > a",function(j){j.preventDefault();if("undefined"!==typeof j.originalEvent){return false}});e(".pager.wizard").on("click","li a",function(r){r.preventDefault();var p=e(this),o=b.find(".nav-pills li.active"),n=p.parent(),l=null,s=false;if(n.hasClass("disabled")){return false}h=true;if(n.hasClass("next")){var m=b.find(".tab-pane.active"),q=m.find("input[required], input[required='required'], select[required], select[required='required'], textarea[required], textarea[required='required']");if(q.length){q.each(function(){var w=e(this),v=w.val(),u=w.prop("tagName");if(!e.trim(v)||("SELECT"==u&&0==v)){w.focus();s=true;return false}})}if(s){c.addClass("disabled");return false}var j=o.next();l=j;n.prev().removeClass("disabled").children("a").removeClass("disabled");if(j.length){b.find(".nav-pills li").removeClass("active");j.find("a").trigger("click")}if(j.is(":last-child")){n.addClass("disabled");c.removeClass("disabled");h=false}}else{var t=o.prev();l=t;n.next().removeClass("disabled").children("a").removeClass("disabled");if(t.length){b.find(".nav-pills li").removeClass("active");t.find("a").trigger("click")}if(t.is(":first-child")){n.addClass("disabled")}}var k=parseInt(l.index());k++;k*=25;f.css({width:k.toString()+"%"});p.blur()})})();(function(){e("#typeOfPost").on("change",function(){var o=this,k=e(o),p=k.val(),n=e("#"+p+"Desc"),i=k.closest(".tab-pane"),q=i.find(".price-fee > span"),l=i.find("option[value='"+p+"']");i.find(".vip-desc").hide();b.attr("data-type",p);if("vip"==p){var j=parseInt(b.attr("data-can-post"));if(0==j){k.val(k.find("option[value='normal']").attr("value"));alert(hteVIP.l10n.not_enough_coin_message);return false}q.removeClass("label-primary");q.addClass("label-success")}else{q.addClass("label-primary");q.removeClass("label-success")}if(n.length){n.show()}q.text(l.attr("data-price"));var m=e("#temp_Fee");if(m.length){m.html(q.prop("outerHTML"))}e("#EndDate").trigger("change")})})();(function(){a.on("hocwpThemeComboboxInputChange",function(o,n,l){var k=l.parent().prev("select");if(k.length){var m=b.find("#temp_"+k.attr("id"));if(m.length&&e.trim(n)){m.html(n)}}});b.on("change cut paste keyup","input, select, textarea",function(){var n=this,l=e(n),k=l.prop("tagName"),p=l.val(),o=b.find("#temp_"+l.attr("id"));if("SELECT"==k){var m=l.find("option[value='"+l.val()+"']");p=m.text();p=e.trim(p)}else{if("INPUT"==k){p=e.trim(p)}}if(o.length&&e.trim(p)){o.html(p)}});e("#StartDate, #EndDate").on("change",function(){var u=this,o=e(u),y=o.attr("id"),s=o.val(),r=o.val(),v=null;if("StartDate"==y){v=e("#EndDate");r=v.val()}else{v=e("#StartDate");s=v.val()}var n=s.split("/"),m=r.split("/");s=n[2]+"-"+n[1]+"-"+n[0];r=m[2]+"-"+m[1]+"-"+m[0];var A=new Date(s),z=new Date(r),x=Math.abs(z.getTime()-A.getTime()),p=Math.ceil(x/(1000*3600*24)),k=e("#typeOfPost"),t=k.val(),l=e("#temp_Cost");if(!l||!l.length){l=e("#temp_Fee")}if(l.length){var q=l.closest(".form-group"),w=q.find("div.price-fee");if("vip"==t){var B=parseFloat(k.find("option[value='"+t+"']").attr("data-cost"));B*=p;e("#TotalCost").val(B);B=B.toFixed(2);l.html('<span class="label label-success">$'+B+"</span>");w.show();w.prev("label").show()}else{l.html("");w.hide();w.prev("label").hide()}}});var j=null,i=setInterval(function(){if("undefined"!==typeof tinyMCE){j=tinyMCE.editors.post_content;if("undefined"!=typeof j){j.on("NodeChange keyup",function(){var k=e("#temp_post_content");if(k.length){k.html(j.getContent())}});clearInterval(i)}}},1000)})()});